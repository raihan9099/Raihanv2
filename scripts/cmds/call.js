const axios = require("axios");

module.exports = {
  config: {
    name: "call",
    aliases: [],
    version: "1.0.0",
    author: "тАФ═Я═Я═Ю═ЮЁЭРВЁЭРШЁЭРБЁЭРДЁЭРС тШвя╕П_ЁЦгШ -ЁЭРБЁЭРОЁЭРУ тЪая╕П ЁЭС╗ЁЭСмЁЭСиЁЭС┤_ тШвя╕П",
    role: 0,
    shortDescription: {
      en: "ржХрж▓ ржмрзЛржорзНржмрж╛рж░, рж╢рзБржзрзБржорж╛рждрзНрж░ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рж┐ ржирж╛ржорзНржмрж╛рж░рзЗрж░ ржЬржирзНржп"
    },
    longDescription: {
      en: "ржХрж▓ ржмрзЛржорзНржмрж┐ржВ ржЪрж╛рж▓рж╛ржУ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рж┐ ржирж╛ржорзНржмрж╛рж░рзЗ тАФ рж╢рзБржзрзБржорж╛рждрзНрж░ ржоржЬрж╛рж░ ржЬржирзНржп"
    },
    category: "tool",
    guide: {
      en: "/call 01xxxxxxxxx"
    },
    cooldown: 15
  },

  onStart: async function ({ message, args }) {
    const number = args[0];

    if (!number || !/^01[0-9]{9}$/.test(number)) {
      return message.reply(
        "ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рж╕ржарж┐ржХ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рж┐ ржирж╛ржорзНржмрж╛рж░ ржжрж┐ржи (ржЙржжрж╛рж╣рж░ржг: /call 01xxxxxxxxx)\n\nтЪая╕П ржжржпрж╝рж╛ ржХрж░рзЗ ржХрзЗржЙ ржЦрж╛рж░рж╛ржк ржХрж╛ржЬрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи ржирж╛,\nржПржЗ ржЯрзБрж▓ржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ ржоржЬрж╛рж░ ржЬржирзНржп рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред"
      );
    }

    await message.reply(`ржХрж▓ ржмрзЛржорзНржмрж┐ржВ рж╢рзБрж░рзБ рж╣ржпрж╝рзЗржЫрзЗ: ${number} ржиржорзНржмрж░рзЗ...ЁЯУЮЁЯТг\n\nтЪая╕П ржХрж╛ржЙржХрзЗ ржмрж┐рж░ржХрзНржд ржХрж░рж╛рж░ ржЬржирзНржп ржПржЗ ржЯрзБрж▓ ржмрзНржпржмрж╣рж╛рж░ рж╕ржорзНржкрзВрж░рзНржг ржирж┐рж╖рж┐ржжрзНржз ржПржмржВ ржЖржЗржиржд ржЕржкрж░рж╛ржзред`);

    try {
      await axios.get(`https://tbblab.shop/callbomber.php?mobile=${number}`);
      await new Promise(r => setTimeout(r, 90000)); // 90 seconds delay
      return message.reply(`тЬЕ ржХрж▓ ржмрзЛржорзНржмрж┐ржВ рж╕ржорзНржкржирзНржи рж╣ржпрж╝рзЗржЫрзЗ ${number} ржиржорзНржмрж░рзЗред\n\nтАФ═Я═Я═Ю═ЮЁЭРВЁЭРШЁЭРБЁЭРДЁЭРС тШвя╕П_ЁЦгШ -ЁЭРБЁЭРОЁЭРУ тЪая╕П`);
    } catch (error) {
      return message.reply(`тЭМ рждрзНрж░рзБржЯрж┐: ${error.message}`);
    }
  }
};
